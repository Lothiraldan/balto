import PropTypes from "prop-types";
import React from "react";
import { Button } from "react-bulma-components";
import Navbar from "react-bulma-components/lib/components/navbar";

import SearchBox from "./SearchBox";

const SvgLogo = props => (
  <svg viewBox="0 0 100 100" height={52} width={52} {...props}>
    <path
      fill="white"
      fillRule="evenodd"
      clipRule="evenodd"
      d="M50.039 13.36l-.371 2.546a35.04 35.04 0 0 0-.37 1.435c-.247.802-.401 1.296-.462 1.481a76.964 76.964 0 0 0-1.066 2.917c-.339 1.112-.555 2.161-.647 3.149a3.026 3.026 0 0 0-.092.741v.787c0 .556.046 1.019.139 1.389l.139.416v.094l.139.045c.124.125.4.187.833.187.587 0 1.513-.062 2.778-.187l2.547-.091c3.333-.124 5.016 0 5.046.371.062.339-1.543.818-4.814 1.435l-3.89.648c-.647.124-1.188.185-1.62.185a1.117 1.117 0 0 1-.463 0l-.741-.046-.324-.093a4.28 4.28 0 0 1-.601-.231 4.304 4.304 0 0 1-.556-.417c-.246-.216-.401-.401-.463-.555a.954.954 0 0 1-.277-.556c-.156-.217-.233-.401-.233-.556-.122-.494-.216-1.158-.277-1.991 0-.186.016-.495.047-.926 0-.371.031-.694.092-.973.124-1.142.401-2.346.833-3.611.278-.803.694-1.805 1.25-3.01.555-1.326 1.111-2.979 1.666-4.953.464-1.944.772-3.102.926-3.473.278-.865.509-1.281.695-1.249.153 0 .246.462.277 1.388.061 1.018.014 2.252-.14 3.704zm.926-3.149a20.184 20.184 0 0 0-.463-1.481 6.41 6.41 0 0 0-.463-.927c-.062-.155-.201-.231-.416-.231-.155.031-.387.124-.696.278-.524.216-.833.293-.925.231-.155-.154-.077-.478.231-.973.217-.4.495-.694.833-.879.31-.123.603-.2.88-.231.339-.03.695.062 1.065.278.494.278.958.756 1.39 1.435.339.557.617 1.158.833 1.806.432 1.111.787 2.454 1.065 4.027.4 2.315.602 4.63.602 6.945.462.186.925.325 1.388.417.526.092 1.42.139 2.686.139.833 0 1.42.015 1.759.046a6.645 6.645 0 0 1 2.083.509v.047c.896.37 1.543.771 1.944 1.204a7.482 7.482 0 0 1 1.527 1.943c.278.495.649 1.205 1.111 2.13.463.74.941 1.282 1.435 1.621.155.093.51.263 1.066.509.277.093.648.154 1.111.186.678.092 1.575.061 2.686-.093.679-.062 1.667-.217 2.963-.463a338.53 338.53 0 0 1 3.195-.464c1.42-.184 2.608-.261 3.565-.231a6.02 6.02 0 0 1 1.99.417l1.065.509.508.463.464.555c.309.647.447 1.435.417 2.361a14.288 14.288 0 0 1-.325 1.99c-.247 1.112-.633 2.347-1.157 3.704a27.867 27.867 0 0 1-.834 1.806c-.37.74-.742 1.343-1.112 1.806a7.153 7.153 0 0 1-.37.509l-1.25 1.111c-.525.339-1.173.68-1.944 1.018-.896.432-2.162.895-3.796 1.389l-1.853.648a23.22 23.22 0 0 0-1.759.741c-2.716 1.296-4.969 2.871-6.76 4.722a3.671 3.671 0 0 1-.231.417 9.665 9.665 0 0 0-.417 2.083c-.03.648.031 1.357.186 2.13l.231.926c.063.153.17.417.324.787l.046.186.463 1.018c.154.34.185.571.092.695-.123.154-.37.185-.74.092a2.177 2.177 0 0 1-.648-.371l-.74-.555c-.401-.432-.648-.726-.741-.879l-.602-1.158a4.268 4.268 0 0 1-.278-1.204 14.08 14.08 0 0 0-1.158 2.916 14.225 14.225 0 0 0-.509 5c0 1.204.046 2.963.139 5.277 0 .957-.015 1.821-.046 2.594a28.896 28.896 0 0 1-.417 2.546c-.369 1.512-1.002 3.024-1.897 4.537l-.324.509-2.314 3.009c-2.778 3.179-6.095 5.941-9.954 8.287l-1.666 1.019a31.993 31.993 0 0 1-2.871 1.667l-1.482.74a9.216 9.216 0 0 1-.371-.555c-.339-.463-.91-1.281-1.713-2.454a240.186 240.186 0 0 1-2.36-3.519 249.572 249.572 0 0 0-3.52-5.278l-4.305-6.528a1069.393 1069.393 0 0 0-2.361-3.564c-.401-.709-1.188-1.991-2.362-3.843a147.642 147.642 0 0 1-2.685-4.027 74.673 74.673 0 0 1-2.685-4.306 31.01 31.01 0 0 1-.695-1.389c.062.462.093.787.093.972.124 1.42.03 2.19-.278 2.315-.371.123-.879-.464-1.528-1.76-.679-1.481-1.188-3.178-1.528-5.092a18.117 18.117 0 0 1-.139-2.13c-.062.186-.108.37-.139.557-.278 1.573-.432 2.638-.462 3.193a35.405 35.405 0 0 0-.139 2.222c-.062.556-.154.849-.278.879-.154.062-.385-.169-.694-.694l-.232-.462-.369-1.155c0-.032-.047-.262-.139-.695-.155-.988-.17-2.207-.047-3.657.155-1.328.479-2.732.973-4.213a29.125 29.125 0 0 1 1.852-3.981c.802-1.235 1.527-2.176 2.174-2.825.278-.277.557-.541.835-.787a14.781 14.781 0 0 1 1.758-1.991c1.11-1.081 2.423-2.207 3.935-3.38a739.03 739.03 0 0 1 3.936-2.778c1.759-1.266 2.962-2.16 3.611-2.685a59.465 59.465 0 0 0 3.102-2.825c1.636-1.605 3.256-3.533 4.861-5.787 1.019-1.481 2.129-3.256 3.333-5.324l2.361-4.167c1.358-2.407 2.1-3.564 2.222-3.473.185.062-.247 1.358-1.296 3.889a56.087 56.087 0 0 1-1.99 4.444c-1.05 2.191-2.083 4.09-3.103 5.695-1.481 2.314-3.101 4.398-4.861 6.25a36.205 36.205 0 0 1-3.147 3.056c-.771.647-2.006 1.604-3.704 2.87a3237.483 3237.483 0 0 0-3.796 2.824c-1.482 1.111-2.701 2.176-3.658 3.195-1.296 1.326-2.252 2.592-2.869 3.796a8.329 8.329 0 0 0-.788 2.175 10.36 10.36 0 0 0-.185 2.361c.031.093.062.277.092.556l.325 1.805c.184.71.293 1.127.323 1.25.124.248.263.633.417 1.158.463 1.265 1.173 2.778 2.13 4.537a85.403 85.403 0 0 0 2.5 4.213c.587.926 1.435 2.284 2.546 4.075l8.612 14.259c.4.617 1.48 2.438 3.241 5.463l2.314 4.259c.463.833.879 1.419 1.25 1.759l2.222-1.111 2.871-1.944c.061-.062.37-.293.926-.694l1.018-.787a76.98 76.98 0 0 0 1.111-.926l1.157-.972c2.129-1.976 3.766-3.704 4.908-5.185l2.269-3.334c.772-1.389 1.281-2.732 1.528-4.028.278-1.203.371-2.746.278-4.629a179.27 179.27 0 0 1-.231-5.138c-.155-1.945.016-3.89.509-5.833a17.495 17.495 0 0 1 2.546-5.557c2.253-3.24 5.494-5.879 9.722-7.917a37.244 37.244 0 0 1 1.944-.833 73.59 73.59 0 0 0 1.944-.648c1.667-.493 2.871-.91 3.612-1.25.647-.309 1.126-.587 1.435-.834l.371-.184.741-.833c.278-.371.57-.849.878-1.435l.741-1.622a20.047 20.047 0 0 0 1.111-3.24c.186-.679.278-1.204.278-1.574a2.606 2.606 0 0 0 0-.695c0-.185-.046-.324-.139-.416v-.046h-.047l-.092-.14-.277-.185-.278-.092c-.339-.155-.787-.247-1.343-.278-.741-.062-1.775-.031-3.103.093-.585.062-1.636.2-3.147.417a59.678 59.678 0 0 1-3.103.371c-1.234.092-2.268.092-3.102 0a24.87 24.87 0 0 0-.787-.139 2.62 2.62 0 0 1-.788-.278c-.617-.217-1.08-.463-1.389-.741-.771-.524-1.42-1.282-1.944-2.269a55.762 55.762 0 0 0-1.02-2.222c-.339-.71-.709-1.266-1.111-1.667-.278-.309-.771-.649-1.481-1.02l-.046-.045a4.968 4.968 0 0 0-1.435-.509c-.524-.062-1.42-.078-2.685-.047-1.266 0-2.3-.093-3.103-.278-.802-.216-1.419-.447-1.852-.695-.401-1.697-.88-4.151-1.435-7.361-.243-1.541-.49-2.791-.737-3.748zm6.25 38.473a49.09 49.09 0 0 0-1.297.741l-2.453 1.759c-1.637 1.452-2.994 2.933-4.074 4.445-1.234 1.82-2.161 3.487-2.778 5-1.204 2.777-2.13 5.926-2.778 9.444-.309 1.605-.633 3.827-.973 6.666-.215 1.636-.4 2.454-.555 2.454-.217 0-.386-.833-.509-2.5-.124-2.005-.047-4.305.23-6.898.34-3.611 1.127-6.975 2.361-10.094.648-1.759 1.605-3.595 2.871-5.508 1.172-1.76 2.67-3.441 4.491-5.046l2.823-1.944c.926-.525 1.42-.803 1.481-.834l1.482-.695c1.573-.617 3.518-1.234 5.833-1.852.71-.154 2.471-.571 5.279-1.25 1.945-.463 3.441-.849 4.49-1.158a31.587 31.587 0 0 0 6.158-2.453c1.451-.772 2.207-1.143 2.268-1.111.062.093-.046.308-.324.648a9.329 9.329 0 0 1-1.389 1.296c-1.575 1.295-3.612 2.422-6.112 3.379-1.142.432-2.654.926-4.537 1.481-2.252.649-3.965 1.142-5.139 1.482-2.252.679-4.089 1.312-5.509 1.898l-1.34.65z"
    />
  </svg>
);

class Header extends React.Component {
  static propTypes = {
    collectAll: PropTypes.func,
    runAll: PropTypes.func,
    countSelected: PropTypes.number
  };

  shouldComponentUpdate(nextProps, nextState) {
    if (this.props.countSelected === nextProps.countSelected) {
      return false;
    }
    return true;
  }

  render() {
    var disabled = true;
    var runSelectedText = "Run selected";
    if (this.props.countSelected > 0) {
      disabled = false;
      runSelectedText = `Run ${this.props.countSelected} selected`;
    }

    return (
      <div>
        <Navbar color="dark" fixed="top">
          <Navbar.Menu>
            <Navbar.Brand>
              <Navbar.Item style={{ padding: "0" }}>
                <SvgLogo />
              </Navbar.Item>
            </Navbar.Brand>
            <Navbar.Container>
              <Navbar.Item renderAs="div" className="is-expanded">
                <SearchBox />
              </Navbar.Item>
            </Navbar.Container>
            <Navbar.Container position="end">
              <Navbar.Item renderAs="div">
                <Button onClick={this.props.collectAll} color={"white"}>
                  Collect all
                </Button>
              </Navbar.Item>
              <Navbar.Item renderAs="div">
                <Button onClick={this.props.runAll} color={"white"}>
                  Run all
                </Button>
              </Navbar.Item>
              <Navbar.Item renderAs="div">
                <Button
                  onClick={this.props.runSelected}
                  color={"white"}
                  disabled={disabled}
                >
                  {runSelectedText}
                </Button>
              </Navbar.Item>
            </Navbar.Container>
          </Navbar.Menu>
        </Navbar>
      </div>
    );
  }
}

export default Header;
